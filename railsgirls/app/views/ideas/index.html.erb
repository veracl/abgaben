<p id="notice"><%= notice %></p>
<% @ideas.group_by(&:category).each do |category, ideas| %>

  <div class="category">

    <table>

      <thead>
        <tr>
          <th class="cat" colspan="6"><%= category.name %></th>
        </tr>

        <tr>
          <td style="width: 50px;"></td>
          <th>Name</th>
          <th>Description</th>
          <th colspan="3"></th>
        </tr>
      </thead>
      <tbody>

      <% ideas.each do |idea| %>
        <tr>
          <td style="width: 50px;">
            <% if idea.picture? %>
               <%= image_tag idea.picture.thumb, :class => "thumb" %>
            <% else %>
               <%= image_tag "no_picture.png", :class => "thumb" %>
            <% end %>
          </td>
          <td style="width: 15%"><%= idea.name %></td>
          <td style="width: 70%"><% if idea.description? %><%= idea.description.truncate_words(15) %><% else %><%= "Keine Beschreibung vorhanden" %><% end %></td>
          <td class="button"><%= link_to idea do %><span class="glyphicon glyphicon-eye-open"></span><% end %></td>
          <td class="button"><%= link_to edit_idea_path(idea) do %><span class="glyphicon glyphicon-pencil"></span><% end %></td>
          <td class="button"><%= link_to idea, method: :delete, data: { confirm: 'Are you sure?' } do %><span class="glyphicon glyphicon-remove-circle"></span><% end %></td>
        </tr>
      <% end %>

      </tbody>
    </table>
    <hr>
  </div>
<% end %>
<% @empty_categories.each do |category| %>

<table>

    <thead>
      <tr>
        <th class="cat" colspan="6"><%= category.name %></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td colspan="7">
          No ideas in this category.
        </td>
      </tr>
    </tbody>
  </table>

  <hr>

<% end %>

<br>

<%= link_to 'New Idea', new_idea_path %> | <%= link_to 'New Category', new_category_path %>
