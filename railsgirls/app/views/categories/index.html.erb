<p id="notice"><%= notice %></p>
<% @ideas.group_by(&:category).each do |category, ideas| %>

  <div class="category">

    <table class="table-hover">

      <thead>
        <%= render partial: "shared/category_header", locals: {category: category, colspan: 5} %>

        <tr>
          <th style="width: 50px;"></th>
          <th>Name</th>
          <th>Description</th>
          <th colspan="3"></th>
        </tr>
      </thead>
      <tbody>

      <% ideas.each do |idea| %>
        <tr>
          <td style="width: 50px;">
            <% if idea.picture? %>
               <%= image_tag idea.picture.thumb, :class => "thumb" %>
            <% else %><% end %>
          </td>
          <td style="width: 15%"><%= idea.name %></td>
          <td style="width: 65%"><% if idea.description? %><%= idea.description.truncate_words(15) %><% else %><%= "Keine Beschreibung vorhanden" %><% end %></td>
          <td class="button"><%= link_to idea do %><span class="glyphicon glyphicon-eye-open"></span><% end %></td>
          <td class="button"><%= link_to edit_idea_path(idea) do %><span class="glyphicon glyphicon-pencil"></span><% end %></td>
          <td class="button"><%= link_to idea, method: :delete, data: { confirm: 'Are you sure?' } do %><span class="glyphicon glyphicon-remove-circle"></span><% end %></td>
        </tr>
      <% end %>

      </tbody>
    </table>
    <hr>
  </div>
<% end %>
<% @empty_categories.each do |category| %>

<table class="table-hover">
  <thead>
    <%= render partial: "shared/category_header", locals: {category: category, colspan: 1} %>
  </thead>
    <tbody>
      <tr>
        <td style="height: 50px;" colspan="2">
          No ideas in this category.
        </td>
      </tr>
    </tbody>
  </table>

  <hr>

<% end %>

<br>

<%= link_to 'New Category', new_category_path %>
